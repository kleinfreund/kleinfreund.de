{% capture suffix -%}
  {% assign day = date | date: '%d' | plus: '0' %}
  {% if day == '1' or day == '21' or day == '31' %}
    st
  {% elsif day == '2' or day == '22' %}
    nd
  {% elsif day == '3' or day == '23' %}
    rd
  {% else %}
    th
  {% endif %}
{%- endcapture %}

{% capture formatted_date -%}
  {{ date | date: '%B' }} {{ day }}<sup>{{ suffix | strip }}</sup>, {{ date | date: '%Y' }}
{%- endcapture %}

<time datetime="{{ date | date: '%Y-%m-%d' }}">{{ formatted_date }}</time>
